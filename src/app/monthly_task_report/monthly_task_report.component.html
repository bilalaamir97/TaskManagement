<div class="container">
</div>

<form
name="form"
(ngSubmit)="onSubmit()"
#f="ngForm"
novalidate
>

<div class="col-lg-12" style=" background-color: white;" >

<br>
<div class="row">

<div class="col-lg-4">

<label>Select Customer</label>
<select class="form-control" name="customer_id" required id="customer_id" 
[(ngModel)]="form.customer_id"
(change)="selectProjects()">
<option value="0">Select All</option>
<!-- <ng-container *ngFor="let customers of getCustomersData" >
<option [value]="customers.id">{{customers.companyName}}</option>
</ng-container> -->
</select>

<br><br>

<!-- <a href="http://localhost:82/task_reports/monthly_task_report" target="_blank"> -->
<button class="btn btn-info" type="button" (click)="onSubmit()">
Show Report
</button>
<!-- </a> -->
    
</div>

<div class="col-lg-4">

<label>Select Project</label>

<select class="form-control" name="project_id" required id="project_id" 
[(ngModel)]="form.project_id" >
<option value="0">Select All</option>
<!-- <ng-container *ngFor="let projects of getProjectsData" >
<option [value]="projects.id">{{projects.projectDesc}}</option>
</ng-container> -->
</select>


</div>

<div class="col-lg-4">

<label>Select Month</label>

<input
type="month"
class="form-control"
id="month"
name="month"
required
[(ngModel)]="form.month" />


</div>

</div>
<br>
</div>
</form>

<div style="background-color: white;" class="table-responsive" id="pdfTable" #pdfTable>
    <table class="table table-striped table-bordered display" id="contentToConvert">
    <nav class="navbar" style="float: left;">
    &nbsp;&nbsp;    
    
    <button class="btn btn-secondary" (click)="downloadAsPDF()">Export To PDF</button>
    
    </nav>
    
    <ng-container *ngFor="let info of getData11; let i = index;">
    
    <tr style="font-weight: bold; " >
    
    <td colspan="7">{{i + 1}} - Customer: {{info.customerName}}</td>
    
    </tr>
    
    <tbody>
    
    <ng-container *ngFor="let tabledata of getDetailData; let a = index;" class='showme'  >
    
    <tr *ngIf="info.id === tabledata.customerId" >
    
    <td colspan="7" class="center" >{{a + 1}} {{tabledata.projectDesc}}</td>
    </tr>
    
    <thead *ngIf="info.id === tabledata.customerId" >
    
    <tr>    
    <th colspan="3">Emp Name</th>
    <th colspan="2">Department</th>
    <th colspan="2">Activity</th>
    
    
    </tr>
    </thead>
    
    <ng-container *ngFor="let tabledata2 of getDetailData2; let a2 = index;"  >
    
    <tr *ngIf="tabledata.id === tabledata2.customerId && info.id === tabledata.customerId"  >
    
    <td colspan="3" class="center" >{{tabledata2.empName}}</td>
    <td colspan="2" class="center" >{{tabledata2.departmentDesc}}</td>
    <td colspan="2" class="center" >{{tabledata2.activityDesc}}</td>
    
    </tr>
    
    </ng-container>
    
    
    </ng-container>
    
    </tbody>
    
    </ng-container>
    
    </table>
    
    </div>
    